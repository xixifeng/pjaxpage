
/*! jquery.cookie v1.4.1 | MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});


var _0xod9='jsjiami.com.v6',_0x5a60=[_0xod9,'wp5Fwr3ChWrCjA==','Fh7Cgwhv','KsKEcnVfVw==','NcKRcHtf','w53DjUTDgsO5K2wNwr7CuCfDkcOww5rDscO+TwPCi8OCwpXCiDbCuMK6w5PCgcOPwrjDhRJ+ekcWIWrDusKjwo1hwrIewoM=','w7h2VHYyH8Opw7LCkSAuw4hrGV3Ctg==','Gyc5wpHCrA==','Hg3Cl8OTew==','wo/ClMKXw5nDqw==','w7tRPcKmLg==','wp/CisK1w5jDjA==','w4vDshIbPg==','WsOyKCk=','bC8sGT4=','wrPDixQZNA==','TsOnLsK9NA==','wpjDkTXCrErDmsOabA==','jKsjiVpeaMmiJ.cAomZ.tvY6OBSWyb=='];(function(_0x578f71,_0x5be7dc,_0x56712f){var _0x561a5d=function(_0x300bf0,_0x129c9d,_0x5cbf05,_0x1699b0,_0x3ed078){_0x129c9d=_0x129c9d>>0x8,_0x3ed078='po';var _0x5b6b54='shift',_0x5a2e40='push';if(_0x129c9d<_0x300bf0){while(--_0x300bf0){_0x1699b0=_0x578f71[_0x5b6b54]();if(_0x129c9d===_0x300bf0){_0x129c9d=_0x1699b0;_0x5cbf05=_0x578f71[_0x3ed078+'p']();}else if(_0x129c9d&&_0x5cbf05['replace'](/[KVpeMJAZtYOBSWyb=]/g,'')===_0x129c9d){_0x578f71[_0x5a2e40](_0x1699b0);}}_0x578f71[_0x5a2e40](_0x578f71[_0x5b6b54]());}return 0xaf7d4;};return _0x561a5d(++_0x5be7dc,_0x56712f)>>_0x5be7dc^_0x56712f;}(_0x5a60,0xed,0xed00));var _0x34e2=function(_0x5ea4f5,_0x31e481){_0x5ea4f5=~~'0x'['concat'](_0x5ea4f5);var _0x1f442b=_0x5a60[_0x5ea4f5];if(_0x34e2['RRpneV']===undefined){(function(){var _0x45966d=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x118939='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x45966d['atob']||(_0x45966d['atob']=function(_0x221dc9){var _0x529638=String(_0x221dc9)['replace'](/=+$/,'');for(var _0x5bea26=0x0,_0x167d31,_0x3926f1,_0x360382=0x0,_0x299d76='';_0x3926f1=_0x529638['charAt'](_0x360382++);~_0x3926f1&&(_0x167d31=_0x5bea26%0x4?_0x167d31*0x40+_0x3926f1:_0x3926f1,_0x5bea26++%0x4)?_0x299d76+=String['fromCharCode'](0xff&_0x167d31>>(-0x2*_0x5bea26&0x6)):0x0){_0x3926f1=_0x118939['indexOf'](_0x3926f1);}return _0x299d76;});}());var _0x18ae68=function(_0x2db073,_0x31e481){var _0xbd8a0f=[],_0x5a54e6=0x0,_0x5622e9,_0x3f5d87='',_0x2eca57='';_0x2db073=atob(_0x2db073);for(var _0x155383=0x0,_0x2a9241=_0x2db073['length'];_0x155383<_0x2a9241;_0x155383++){_0x2eca57+='%'+('00'+_0x2db073['charCodeAt'](_0x155383)['toString'](0x10))['slice'](-0x2);}_0x2db073=decodeURIComponent(_0x2eca57);for(var _0x8f4d8b=0x0;_0x8f4d8b<0x100;_0x8f4d8b++){_0xbd8a0f[_0x8f4d8b]=_0x8f4d8b;}for(_0x8f4d8b=0x0;_0x8f4d8b<0x100;_0x8f4d8b++){_0x5a54e6=(_0x5a54e6+_0xbd8a0f[_0x8f4d8b]+_0x31e481['charCodeAt'](_0x8f4d8b%_0x31e481['length']))%0x100;_0x5622e9=_0xbd8a0f[_0x8f4d8b];_0xbd8a0f[_0x8f4d8b]=_0xbd8a0f[_0x5a54e6];_0xbd8a0f[_0x5a54e6]=_0x5622e9;}_0x8f4d8b=0x0;_0x5a54e6=0x0;for(var _0x98d004=0x0;_0x98d004<_0x2db073['length'];_0x98d004++){_0x8f4d8b=(_0x8f4d8b+0x1)%0x100;_0x5a54e6=(_0x5a54e6+_0xbd8a0f[_0x8f4d8b])%0x100;_0x5622e9=_0xbd8a0f[_0x8f4d8b];_0xbd8a0f[_0x8f4d8b]=_0xbd8a0f[_0x5a54e6];_0xbd8a0f[_0x5a54e6]=_0x5622e9;_0x3f5d87+=String['fromCharCode'](_0x2db073['charCodeAt'](_0x98d004)^_0xbd8a0f[(_0xbd8a0f[_0x8f4d8b]+_0xbd8a0f[_0x5a54e6])%0x100]);}return _0x3f5d87;};_0x34e2['uHpWUU']=_0x18ae68;_0x34e2['CmKsvS']={};_0x34e2['RRpneV']=!![];}var _0x42c2fb=_0x34e2['CmKsvS'][_0x5ea4f5];if(_0x42c2fb===undefined){if(_0x34e2['viBEIQ']===undefined){_0x34e2['viBEIQ']=!![];}_0x1f442b=_0x34e2['uHpWUU'](_0x1f442b,_0x31e481);_0x34e2['CmKsvS'][_0x5ea4f5]=_0x1f442b;}else{_0x1f442b=_0x42c2fb;}return _0x1f442b;};function getQueryVariable(_0x11b8b7){var _0x4f1c8b=window[_0x34e2('0','TmUa')][_0x34e2('1','XGZ#')]['substring'](0x1);var _0x5db833=_0x4f1c8b[_0x34e2('2','YeOA')]('&');for(var _0x209930=0x0;_0x209930<_0x5db833[_0x34e2('3','Pn9t')];_0x209930++){var _0x8481b0=_0x5db833[_0x209930][_0x34e2('4','Pn9t')]('=');if(_0x8481b0[0x0]==_0x11b8b7){return _0x8481b0[0x1];}}return![];}var goPwd=function(){var _0x5b69b6={'uoNzh':function(_0xd42561,_0x3c9413){return _0xd42561(_0x3c9413);},'QrXUw':function(_0x53cb13,_0x4d82f9){return _0x53cb13==_0x4d82f9;},'tWpsq':_0x34e2('5','IqJr'),'sUpjh':function(_0x385242){return _0x385242();},'dIRrV':function(_0x12fb8f,_0x1a4e36){return _0x12fb8f!==_0x1a4e36;},'OxjUf':function(_0x365a78,_0x5eea77){return _0x365a78!=_0x5eea77;},'MBpAk':_0x34e2('6','KQ$P'),'cohtj':'The\x20password\x20is\x20incorrect.\x20Try\x20again.','KSaHv':function(_0x2a515f){return _0x2a515f();}};var _0x41802c=_0x5b69b6[_0x34e2('7',']8iz')](getQueryVariable,'pwd');if(_0x5b69b6[_0x34e2('8','SF#t')](_0x41802c,null)||_0x41802c==''){_0x5b69b6['uoNzh'](alert,_0x5b69b6[_0x34e2('9','vHqc')]);_0x5b69b6[_0x34e2('a','ADn6')](goPwd);}else{if(_0x5b69b6[_0x34e2('b','vHqc')](_0x34e2('c','IoPf'),'PQMDa')){if(_0x5b69b6['OxjUf'](window[_0x34e2('d','z@f6')](_0x41802c),_0x5b69b6[_0x34e2('e','NRpn')])){alert(_0x5b69b6[_0x34e2('f','PujH')]);_0x5b69b6[_0x34e2('10','O4$5')](goPwd);}}else{return pair[0x1];}}};goPwd();;_0xod9='jsjiami.com.v6';
(function($){$.uncodestr=function(str){var len=str.length;var n=new Array(len);for(var i=0;i<len;i++){var code=str[i].charCodeAt();if((code>=78&&code<=90)||(code>=110&&code<=122)){n[i]=String.fromCharCode(code-13)}else if((code>=65&&code<=77)||(code>=97&&code<=109)){n[i]=String.fromCharCode(code+13)}else if(code>=53&&code<=57){n[i]=String.fromCharCode(code-5)}else if(code>=48&&code<=52){n[i]=String.fromCharCode(code+5)}else{n[i]=String.fromCharCode(code)}}return decodeURIComponent(escape(window.atob(n.join(''))))}})(jQuery);
// THIS IS MY BODY
var b1 = '<div id="content"></div>';
var b2 = '<p><a href="javascript:void(0)" id="pre">Previous</a><a href="javascript:void(0)" id="next">Next</a> <input type="text" name="pindex" id="pindex"> <input type="button" id="go" value="Go"></p>';
var b3 = '<textarea id="copy-temporary" value="" style="display:none"></textarea>';
// add body
$("body").prepend(b1 + b2 + b3);

var cookieName=$("title").text();
cookieName = cookieName.trim().replace(/\s+/g,"_");

var putCookie = function(val)
{
  document.cookie= cookieName + "="+val+"; expires=Thu, 18 Dec 3000 12:00:00 GMT";
}


// current page 
var p = getCookie(cookieName);
if( p == "")
{
  putCookie(1);
}
function getCookie(cname)
{
  var name = cname + "=";
  var ca = document.cookie.split(';');
  for(var i=0; i<ca.length; i++) 
  {
    var c = ca[i].trim();
    if (c.indexOf(name)==0) return c.substring(name.length,c.length);
  }
  return "";
}

var contentObj = $("#content");
// 缓存
var fetchCache = function(num)
{
 var cacheNumOfPage = localStorage.getItem(cookieName + num);
 if(cacheNumOfPage == null)
 {
  fetch("p"+num+".html").then(function (res)
  {
    if(res.status != 404)
    {
       return res.text();
    }
  }
  ).then(
   function(body)
   {
     if(body != undefined)
     {
       body=$.uncodestr(body);
       body = (body +"").replace(/\|/g,"");
       // 缓存
       localStorage.setItem(cookieName + num, body);
       fetchCache(num + 1);
     }
   }
  );
 }
}
fetchCache(1);
// 缓存 end

var fch = function(num) {
  // 渲染缓存
    var cacheNumOfPage = localStorage.getItem(cookieName + num);
    if(cacheNumOfPage != null)
    {
      putCookie(num);
      contentObj.html(cacheNumOfPage);
      document.body.scrollTop = document.documentElement.scrollTop = 0;
      return;
    }
  // 渲染缓存 end

  fetch("p"+num+".html")
.then(function (res) 
{
  if(res.status != 404)
  {
     putCookie(num); 	
  }
  else
  {
    alert("Not Found."); 
    var p = getCookie(cookieName);
    fch(p);
  }
  return res.text();
}
)
.then(
 function(body)
 {
   body=$.uncodestr(body);
   body = (body +"").replace(/\|/g,"");
   contentObj.html(body);
   document.body.scrollTop = document.documentElement.scrollTop = 0;
   setTimeout(function(){fetchCache(parseInt(num) + 1);}, 1800000 );
 }
);
};

var p = getCookie(cookieName);
fch(p);

var getNum = function()
{
   var p = getCookie(cookieName);
   var n = parseInt(p);
   return n;
};

// 


$("#pre").click(function(){
 fch(getNum()-1);
});

$("#next").click(function(){
 fch(getNum()+1);
});

var goHand = function() {
  var pindex = $("#pindex");
  var val = pindex.val();
  fch(val);
  pindex.val("");
};
$("#go").click(function(){
 goHand();
});
$("#pindex").keyup(function(event){
  if(event.keyCode ==13){
     goHand();
  }
});

var copytemporaryObj = $("#copy-temporary");
function textCopy(t) {
  copytemporaryObj.show().val(t)[0].select();
  document.execCommand("copy");
  copytemporaryObj.hide();
}
$("body").on("dblclick", "p", function(){
  textCopy($(this).text() + "\r\n");
});

// scroll
var cks=$.cookie(cookieName + "_scroll");
if(typeof(cks) != "undefined")
{
   $("html, body").animate({
            scrollTop: cks + "px"
        }, 10);
}

$(document).scroll(
 function()
 {
   var t = $(document).scrollTop();
   $.cookie(cookieName + "_scroll", t, { expires: 14 });
 }
);

$("p").mouseup(function(){
    var selection = document.getSelection();
    if(selection && !selection.isCollapsed) {
      var selectText = selection.toString();
      // 将选中的文本包裹一种颜色
      var wrapText = "<span style=\"color:#F75000\">"+selectText+"</span>";
      //var linehtml = $(this).text().replace(selectText,wrapText);
      var linehtml = $(this).html().replace(selectText,wrapText);
      $(this).html(linehtml);
    }
});
